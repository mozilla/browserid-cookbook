<!DOCTYPE html>

<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>django browserid example</title>
  </head>
  <body>

    <form id="login-form" method="POST" action="/status/">
      {% csrf_token %}
      <input id="assertion-field" type="hidden" name="assertion" value="" />
    </form>

    <p><a href="javascript:login()">Login</a></p>

    <script src="https://login.persona.org/include.js"></script>
    <script>
      function login() {
          navigator.id.get(function(assertion) {
              if (assertion) {
                  var assertion_field = document.getElementById("assertion-field");
                  assertion_field.value = assertion;
                  var login_form = document.getElementById("login-form");
                  login_form.submit();
              }
          });
      }
    </script>
  </body>
</html>
